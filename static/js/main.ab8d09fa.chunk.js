(this.webpackJsonpmusicfromspotify=this.webpackJsonpmusicfromspotify||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/loginHeadphones.1df5799c.jpg"},,,,function(e,t,a){e.exports=a(46)},,,,,function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(5),r=a.n(c),i=(a(22),a(1)),l=(a(29),a(30),a(13)),u=a.n(l),o=(a(31),"https://accounts.spotify.com/authorize?client_id=".concat("4d305e8a665a43b59a5e7f5f71e265df","&response_type=code&redirect_uri=").concat("https://mkphercog.github.io/musicfromspotify/","&scope=").concat("user-read-email")),m=function(){var e=window.location.href;return e.includes("code")?e.slice(e.indexOf("=")+1,e.length):""},f=function(e,t,a){var n=new URLSearchParams;n.append("grant_type","refresh_token"),n.append("refresh_token",e);var s=new Headers;s.append("Authorization","Basic ".concat(btoa("4d305e8a665a43b59a5e7f5f71e265df:fc67cf47ac024e2cb3a703b27e2bdd71"))),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:s,body:n}).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(n){t(a(n.access_token,e))})).catch((function(e){return console.log(e)}))},b=function(){return s.a.createElement("div",{className:"loginpage__buttons"},s.a.createElement("a",{className:"loginpage__loginBtn",href:o},"Zaloguj si\u0119 do Spotify"),s.a.createElement("a",{className:"loginpage__registerBtn",href:"https://www.spotify.com/pl/signup/"},"Nie masz konta? Za\u0142\xf3\u017c je tutaj."))},_=function(){return s.a.createElement("div",{style:{backgroundImage:"url(".concat(u.a,")")},className:"loginpage"},s.a.createElement(b,null))},h=(a(32),a(33),function(){return s.a.createElement("header",{className:"header"},s.a.createElement("h1",{className:"header__title"},"Music from ",s.a.createElement("span",{className:"header__spotify"},"Spotify")))}),p=(a(34),a(16)),d=(a(35),a(36),function(e){var t=e.inputValue,a=e.setInputValue,n=e.isSearchResultsVisible,c=e.showResults,r=e.dispatch;return s.a.createElement("input",{className:"searchsection__input",placeholder:"Wyszukaj album / artyst\u0119...",type:"text",value:t,onClick:function(){n||r(c())},onChange:function(e){return a(e.target.value)}})}),E=(a(37),function(){return s.a.createElement("button",{className:"searchsection__searchbtn"},s.a.createElement("i",{className:"fas fa-search"}))}),A=(a(38),a(39),function(e){return{type:"DELETE_ALBUM_FROM_LIST",albumID:e}}),g=function(e,t){return{type:"SET_ACCESS_TOKENS",access_token:e,refresh_token:t}},N=function(e){return{type:"DATA_ERROR",errorMessage:e}},k=(a(40),function(){return s.a.createElement("div",{className:"loadingPage"},s.a.createElement("p",{className:"loadingPage__name"},"Wczytuje dane..."))}),v=function(e){var t=e.listOfAlbums,a=Object(i.c)((function(e){return e.fetchData.featching})),n=Object(i.c)((function(e){return e.authorization.access_token})),c=Object(i.c)((function(e){return e.favouriteAlbums.favouriteAlbums})),r=Object(i.c)((function(e){return e.authorization.refresh_token})),l=Object(i.b)(),u=t.filter((function(e){return"album"===e.album_type})).map((function(e){var t=c.find((function(t){return e.id===t.albumID}));return s.a.createElement("div",{key:e.id,className:"searchsection__result"},s.a.createElement("p",{className:"searchsection__description"},e.name),s.a.createElement("img",{className:"searchsection__albumImage",src:e.images[1].url,alt:"Album"}),s.a.createElement("p",{className:"searchsection__description"},e.artists[0].name),s.a.createElement("button",{className:"searchsection__addToFavourite",disabled:t,onClick:function(){l({type:"DATA_FETCHING"}),function(e){fetch("https://api.spotify.com/v1/albums/".concat(e.id,"/tracks"),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(t){var a={albumIMG:e.images[1].url,albumID:e.id,albumName:e.name,artistName:e.artists[0].name,tracks:t.items,spotifyAlbumURL:e.external_urls.spotify};l({type:"DATA_FETCHED"}),l(function(e){return{type:"ADD_ALBUM_TO_LIST",albumIMG:e.albumIMG,albumID:e.albumID,albumName:e.albumName,artistName:e.artistName,tracks:e.tracks,spotifyAlbumURL:e.spotifyAlbumURL}}(a))})).catch((function(e){l(N(e.message)),f(r,l,g)}))}(e)}},t?"Dodano do ulubionych":"Dodaj do ulubionych"))}));return s.a.createElement(s.a.Fragment,null,a?s.a.createElement(k,null):null,u)},y=function(e){var t=e.listOfAlbums,a=e.hideSearchResults,n=e.dispatch,c=e.setInputValue,r=e.searchAlbums;return s.a.createElement("div",{className:"searchsection___wrapper"},s.a.createElement("div",{className:"searchsection__results"},t.length?s.a.createElement(v,{listOfAlbums:t}):s.a.createElement("p",{className:"searchsection__noResults"},"Brak wynik\xf3w wyszukiwania")),s.a.createElement("button",{className:"searchsection__close",onClick:function(){n(a()),c(""),n(r([]))}},"Zamknij wyszukiwark\u0119"))},S=function(e){return{type:"SEARCH_ALBUMS",listOfAlbums:e}},D=function(){return{type:"SHOW_SEARCH_RESULTS",isSearchResultsVisible:!0}},O=function(){return{type:"HIDE_SEARCH_RESULTS",isSearchResultsVisible:!1}},T=function(){var e=Object(i.c)((function(e){return e.fetchData.featching})),t=Object(i.c)((function(e){return e.searching.isSearchResultsVisible})),a=Object(i.c)((function(e){return e.authorization.access_token})),c=Object(i.c)((function(e){return e.authorization.refresh_token})),r=Object(i.c)((function(e){return e.searching.listOfAlbums})),l=Object(n.useState)(""),u=Object(p.a)(l,2),o=u[0],m=u[1],b=Object(i.b)();return s.a.createElement("section",{className:"searchsection"},e?s.a.createElement(k,null):null,s.a.createElement("form",{className:"searchsection__form",onSubmit:function(e){t||b({type:"SHOW_SEARCH_RESULTS",isSearchResultsVisible:!0}),function(e){e.preventDefault(),""!==o?(b({type:"DATA_FETCHING"}),fetch("https://api.spotify.com/v1/search?q=".concat(o,"&type=album"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){b({type:"DATA_FETCHED"}),b(S(e.albums.items))})).catch((function(e){b(N(e.message)),f(c,b,g)}))):b(S([]))}(e)}},s.a.createElement("div",{className:"searchsection__relative"},s.a.createElement(d,{inputValue:o,setInputValue:m,isSearchResultsVisible:t,showResults:D,dispatch:b}),s.a.createElement(E,null))),s.a.createElement("div",{className:"searchsection__resultsPosition"},t?s.a.createElement(y,{dispatch:b,hideSearchResults:O,listOfAlbums:r,setInputValue:m,searchAlbums:S}):null))},R=(a(41),a(42),a(43),function(e){var t=e.track,a=e.isTrackPlaying,n=e.stopBtnClasses,c=e.trackClasses,r=e.dispatch,i=e.stopMusic,l=e.setAndPlayCurrentTrack;return s.a.createElement("div",{className:"albumssection__trackWrapper"},t.preview_url?a?s.a.createElement("button",{className:n,onClick:function(){r(i())}},"Stop"):s.a.createElement("button",{className:"albumssection__detailsTrackButton",onClick:function(){r(l(t.preview_url))}},"Play"):s.a.createElement("button",{className:"albumssection__detailsTrackButton",disabled:!0},"Play"),s.a.createElement("p",{className:c},t.track_number,". ",t.name))}),I=function(e){return{type:"SET_AND_PLAY_CURRENT_TRACK",trackURL:e}},j=function(){return{type:"STOP_PLAYING_TRACK"}},L=function(e){var t=e.albumDetails,a=e.isPlaying,n=e.currentTrack,c=e.dispatch,r=e.hideAlbumDetails,i=e.deleteAlbumFromList,l=t.tracks.map((function(e){var t=a&&n===e.preview_url,r=t?"albumssection__detailsTrackName albumssection__detailsTrackName--green":"albumssection__detailsTrackName",i=t?"albumssection__detailsTrackButton albumssection__detailsTrackButton--green":"albumssection__detailsTrackButton";return s.a.createElement(R,{key:e.id,track:e,isTrackPlaying:t,stopBtnClasses:i,trackClasses:r,dispatch:c,stopMusic:j,setAndPlayCurrentTrack:I})}));return s.a.createElement("div",{className:"albumssection__detailsAlbum"},s.a.createElement("div",{className:"albumssection__albumInfoWrapper"},s.a.createElement("img",{className:"albumssection__detailsImage",src:t.albumIMG,alt:"Album"}),s.a.createElement("div",{className:"albumssection__detailsNameWrapper"},s.a.createElement("h1",{className:"albumssection__detailsArtistName"},t.artistName),s.a.createElement("h2",{className:"albumssection__detailsAlbumName"},t.albumName)),s.a.createElement("div",{className:"albumssection__detailsButtonsWrapper"},s.a.createElement("a",{className:"albumssection__detailsFullAlbumSpotify",href:t.spotifyAlbumURL,target:"_blank",rel:"noopener noreferrer"},"Pe\u0142ny album znajdziesz tutaj"),s.a.createElement("button",{className:"albumssection__detailsDeleteAlbum",onClick:function(){c(r()),c(i(t.albumID))}},"Usu\u0144 album z ulubionych"))),s.a.createElement("div",{className:"albumssection__tracksWrapper"},l),s.a.createElement("button",{className:"albumssection__detailsClose",onClick:function(){return c(r())}},s.a.createElement("i",{className:"fas fa-times"})))},w=(a(44),function(e){var t=e.album,a=e.dispatch,n=e.showAlbumDetails,c=e.setAlbumDetails;return s.a.createElement("div",{className:"albumssection__wrapper"},s.a.createElement("img",{src:t.albumIMG,alt:"Album",className:"albumssection__image"}),s.a.createElement("div",{className:"albumssection__hoverDiv",onClick:function(){a(n()),a(c({albumIMG:t.albumIMG,albumID:t.albumID,albumName:t.albumName,artistName:t.artistName,tracks:t.tracks,spotifyAlbumURL:t.spotifyAlbumURL}))}},s.a.createElement("p",{className:"albumssection__nameHover"},t.artistName),s.a.createElement("p",{className:"albumssection__nameHover"},t.albumName)))}),C=function(){return{type:"SHOW_ALBUM_DETAILS",isAlbumDetailsVisible:!0}},U=function(){return{type:"HIDE_ALBUM_DETAILS",isAlbumDetailsVisible:!1}},M=function(e){return{type:"SET_ALBUM_DETAILS",albumDetails:e}},H=function(){var e=Object(i.c)((function(e){return e.favouriteAlbums.favouriteAlbums})),t=Object(i.c)((function(e){return e.player.trackURL})),a=Object(i.c)((function(e){return e.player.isPlaying})),n=Object(i.c)((function(e){return e.albumDetails.albumDetails})),c=Object(i.c)((function(e){return e.albumDetails.isAlbumDetailsVisible})),r=Object(i.b)(),l=e.map((function(e){return s.a.createElement(w,{key:e.albumID,album:e,dispatch:r,showAlbumDetails:C,setAlbumDetails:M})}));return s.a.createElement("section",{className:"albumssection"},l.length?l.reverse():s.a.createElement("div",{className:"albumssection__noResults"},s.a.createElement("p",{className:"albumssection__noResultName"},"Brak album\xf3w")),c?s.a.createElement(L,{albumDetails:n,isPlaying:a,currentTrack:t,dispatch:r,hideAlbumDetails:U,deleteAlbumFromList:A}):null)},B=function(){return s.a.createElement("main",{className:"main"},s.a.createElement(T,null),s.a.createElement(H,null))},P=(a(45),function(){return s.a.createElement("footer",{className:"footer"},s.a.createElement("p",{className:"footer__author"},"Projekt i realizacja Marcin Hercog"))}),z=function(){return s.a.createElement("div",{className:"websitepage"},s.a.createElement(h,null),s.a.createElement(B,null),s.a.createElement(P,null))},V=function(){var e=function(){var e=m(),t=new Headers;t.append("Authorization","Basic ".concat(btoa("4d305e8a665a43b59a5e7f5f71e265df:fc67cf47ac024e2cb3a703b27e2bdd71")));var a=new URLSearchParams;return a.append("grant_type","authorization_code"),a.append("code",e),a.append("redirect_uri",String("https://mkphercog.github.io/musicfromspotify/")),{headers:t,urlencoded:a,fetchOptions:{method:"POST",headers:t,body:a,redirect:"follow"},codeToGetAccess:e}}(),t=e.codeToGetAccess,a=e.fetchOptions,c=Object(i.c)((function(e){return e.authorization.access_token})),r=Object(i.c)((function(e){return e.fetchData.featching})),l=Object(i.b)();return Object(n.useEffect)((function(){t&&!c&&(l({type:"DATA_FETCHING"}),fetch("https://accounts.spotify.com/api/token",a).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){l({type:"DATA_FETCHED"}),l(g(e.access_token,e.refresh_token))})).catch((function(e){l(N(e.message)),console.log(e)}))),t||(localStorage.setItem("access_token",""),localStorage.setItem("refresh_token","")),window.innerWidth>=1024&&l({type:"SHOW_SEARCH_RESULTS",isSearchResultsVisible:!0})}),[]),s.a.createElement("div",{className:"App"},r?s.a.createElement(k,null):null,c?s.a.createElement(z,null):s.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(3),W=a(14),F=a(15),K=a(2),x={access_token:m()?String(localStorage.getItem("access_token")):"",refresh_token:localStorage.getItem("refresh_token")?String(localStorage.getItem("refresh_token")):""},J={listOfAlbums:[],isSearchResultsVisible:!1},Y=a(10),Z=localStorage.getItem("favouriteAlbums")?localStorage.getItem("favouriteAlbums"):"",q={favouriteAlbums:Z?JSON.parse(Z):[]},$=new Audio,Q={trackURL:"",isPlaying:!1},X={isAlbumDetailsVisible:!1,albumDetails:{albumIMG:"",albumID:"",albumName:"",artistName:"",tracks:[],spotifyAlbumURL:""}},ee={featching:!1,featched:!1,error:!1,errorMessage:""},te=Object(G.combineReducers)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCESS_TOKENS":return localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),Object(K.a)({},e,{access_token:t.access_token,refresh_token:t.refresh_token});default:return e}},searching:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_SEARCH_RESULTS":case"HIDE_SEARCH_RESULTS":return Object(K.a)({},e,{isSearchResultsVisible:t.isSearchResultsVisible});case"SEARCH_ALBUMS":return Object(K.a)({},e,{listOfAlbums:t.listOfAlbums});default:return e}},favouriteAlbums:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALBUM_TO_LIST":var a={albumIMG:t.albumIMG,albumID:t.albumID,albumName:t.albumName,artistName:t.artistName,tracks:t.tracks,spotifyAlbumURL:t.spotifyAlbumURL};return localStorage.setItem("favouriteAlbums",JSON.stringify([].concat(Object(Y.a)(e.favouriteAlbums),[a]))),Object(K.a)({},e,{favouriteAlbums:[].concat(Object(Y.a)(e.favouriteAlbums),[a])});case"DELETE_ALBUM_FROM_LIST":var n=e.favouriteAlbums.filter((function(e){return e.albumID!==t.albumID}));return localStorage.setItem("favouriteAlbums",JSON.stringify(n)),Object(K.a)({},e,{favouriteAlbums:n});default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AND_PLAY_CURRENT_TRACK":return $.src=t.trackURL,$.play(),Object(K.a)({},e,{trackURL:t.trackURL,isPlaying:!0});case"STOP_PLAYING_TRACK":return $.pause(),Object(K.a)({},e,{trackURL:"",isPlaying:!1});default:return e}},albumDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALBUM_DETAILS":case"HIDE_ALBUM_DETAILS":return Object(K.a)({},e,{isAlbumDetailsVisible:t.isAlbumDetailsVisible});case"SET_ALBUM_DETAILS":return Object(K.a)({},e,{albumDetails:t.albumDetails});default:return e}},fetchData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_FETCHING":return Object(K.a)({},e,{featching:!0,featched:!1,error:!1,errorMessage:""});case"DATA_FETCHED":return Object(K.a)({},e,{featching:!1,featched:!0,error:!1,errorMessage:""});case"DATA_ERROR":return Object(K.a)({},e,{featching:!1,featched:!1,error:!0,errorMessage:t.errorMessage});default:return e}}}),ae=Object(F.composeWithDevTools)(Object(G.applyMiddleware)(W.a)),ne=Object(G.createStore)(te,ae);r.a.render(s.a.createElement(i.a,{store:ne},s.a.createElement(s.a.StrictMode,null,s.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.ab8d09fa.chunk.js.map