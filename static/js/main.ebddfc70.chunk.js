(this.webpackJsonpmusicfromspotify=this.webpackJsonpmusicfromspotify||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/loginHeadphones.1df5799c.jpg"},,,,,function(e,t,a){e.exports=a(46)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(5),r=a.n(s),l=(a(22),a(23),a(24),a(12)),i=a.n(l),o=(a(25),"https://accounts.spotify.com/authorize?client_id=".concat("4d305e8a665a43b59a5e7f5f71e265df","&response_type=code&redirect_uri=").concat("https://mkphercog.github.io/musicfromspotify/","&scope=").concat("user-read-email")),u=function(){var e=window.location.href;return e.includes("code")?e.slice(e.indexOf("=")+1,e.length):""},m=function(){return c.a.createElement("div",{className:"loginpage__buttons"},c.a.createElement("a",{className:"loginpage__loginBtn",href:o},"Zaloguj si\u0119 do Spotify"),c.a.createElement("a",{className:"loginpage__registerBtn",href:"https://www.spotify.com/pl/signup/"},"Nie masz konta? Za\u0142\xf3\u017c je tutaj."))},f=function(){return c.a.createElement("div",{style:{backgroundImage:"url(".concat(i.a,")")},className:"loginpage"},c.a.createElement(m,null))},b=(a(26),a(27),function(){return c.a.createElement("header",{className:"header"},c.a.createElement("h1",{className:"header__title"},"Music from ",c.a.createElement("span",{className:"header__spotify"},"Spotify")))}),_=(a(28),a(16)),h=a(1),d=(a(35),a(36),function(e){var t=e.value,a=e.setValue,n=e.showResults,s=e.dispatch;return c.a.createElement("input",{className:"searchsection__input",placeholder:"Wyszukaj...",type:"text",value:t,onClick:function(){s(n())},onChange:function(e){return a(e.target.value)}})}),p=(a(37),function(){return c.a.createElement("button",{className:"searchsection__searchbtn"},c.a.createElement("i",{className:"fas fa-search"}))}),E=(a(38),a(39),function(e){return{type:"DELETE_ALBUM_FROM_LIST",albumID:e}}),A=function(e){return{type:"DATA_ERROR",errorMessage:e}},g=(a(40),function(){return c.a.createElement("div",{className:"loadingPage"},c.a.createElement("p",{className:"loadingPage__name"},"Wczytuje dane..."))}),N=function(e){var t=e.listOfAlbums,a=Object(h.c)((function(e){return e.fetchData.featching})),n=Object(h.c)((function(e){return e.authorization.access_token})),s=Object(h.b)(),r=Object(h.c)((function(e){return e.favouriteAlbums.favouriteAlbums})),l=t.filter((function(e){return"album"===e.album_type})).map((function(e){var t=r.find((function(t){return e.id===t.albumID}));return c.a.createElement("div",{key:e.id,className:"searchsection__result"},c.a.createElement("p",{className:"searchsection__description"},e.name),c.a.createElement("img",{className:"searchsection__albumImage",src:e.images[2].url,alt:"Album"}),c.a.createElement("p",{className:"searchsection__description"},e.artists[0].name),c.a.createElement("button",{className:"searchsection__addToFavourite",disabled:t,onClick:function(){s({type:"DATA_FETCHING"}),fetch("https://api.spotify.com/v1/albums/".concat(e.id,"/tracks"),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(t){var a={albumIMG:e.images[1].url,albumID:e.id,albumName:e.name,artistName:e.artists[0].name,tracks:t.items,spotifyAlbumURL:e.external_urls.spotify};s({type:"DATA_FETCHED"}),s(function(e){return{type:"ADD_ALBUM_TO_LIST",albumIMG:e.albumIMG,albumID:e.albumID,albumName:e.albumName,artistName:e.artistName,tracks:e.tracks,spotifyAlbumURL:e.spotifyAlbumURL}}(a))})).catch((function(e){s(A(e.message)),console.log(e)}))}},t?"Dodano do ulubionych":"Dodaj do ulubionych"))}));return c.a.createElement(c.a.Fragment,null,a?c.a.createElement(g,null):null,l)},v=function(e){return{type:"SEARCH_ALBUMS",listOfAlbums:e}},k=function(){return{type:"SHOW_SEARCH_RESULTS",isSearchResultsVisible:!0}},S=function(){var e=Object(h.c)((function(e){return e.searching.listOfAlbums})),t=Object(h.b)();return c.a.createElement("div",{className:"searchsection___wrapper"},c.a.createElement("div",{className:"searchsection__results"},e.length?c.a.createElement(N,{listOfAlbums:e}):c.a.createElement("p",{className:"searchsection__noResults"},"Brak danych")),c.a.createElement("button",{className:"searchsection__close",onClick:function(){return t({type:"HIDE_SEARCH_RESULTS",isSearchResultsVisible:!1})}},"Zamknij wyszukiwark\u0119"))},y=function(e,t){return{type:"SET_ACCESS_TOKENS",access_token:e,refresh_token:t}},D=function(){var e=Object(h.c)((function(e){return e.fetchData.featching})),t=Object(h.c)((function(e){return e.searching.isSearchResultsVisible})),a=Object(h.c)((function(e){return e.authorization.access_token})),s=Object(h.c)((function(e){return e.authorization.refresh_token})),r=Object(n.useState)(""),l=Object(_.a)(r,2),i=l[0],o=l[1],u=Object(h.b)(),m=function(e){e.preventDefault(),""!==i?(u({type:"DATA_FETCHING"}),fetch("https://api.spotify.com/v1/search?q=".concat(i,"&type=album"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){u({type:"DATA_FETCHED"}),u(v(e.albums.items))})).catch((function(e){u(A(e.message)),function(e,t,a,n){var c=new URLSearchParams;c.append("grant_type","refresh_token"),c.append("refresh_token",e);var s=new Headers;s.append("Authorization","Basic ".concat(btoa("4d305e8a665a43b59a5e7f5f71e265df:fc67cf47ac024e2cb3a703b27e2bdd71"))),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:s,body:c}).then((function(e){if(200===e.status)return e.json()})).then((function(c){t(a(c.access_token,e)),t(n([]))}))}(s,u,y,v)}))):u(v([]))};return c.a.createElement("section",{className:"searchsection"},e?c.a.createElement(g,null):null,c.a.createElement("form",{className:"searchsection__form",onSubmit:function(e){u({type:"SHOW_SEARCH_RESULTS",isSearchResultsVisible:!0}),m(e)}},c.a.createElement("div",{className:"relative"},c.a.createElement(d,{value:i,setValue:o,showResults:k,dispatch:u}),c.a.createElement(p,null))),c.a.createElement("div",{className:"searchsection__resultsPosition"},t?c.a.createElement(S,null):null))},O=(a(41),a(42),function(e){var t=e.albumDetails,a=e.tracksListCurrentAlbum,n=e.dispatch,s=e.hideAlbumDetails,r=e.deleteAlbumFromList;return c.a.createElement("div",{className:"albumssection__detailsAlbum"},c.a.createElement("div",{className:"albumssection__albumInfoWrapper"},c.a.createElement("img",{className:"albumssection__detailsImage",src:t.albumIMG,alt:"Album"}),c.a.createElement("div",{className:"albumssection__detailsNameWrapper"},c.a.createElement("h1",{className:"albumssection__detailsArtistName"},t.artistName),c.a.createElement("h2",{className:"albumssection__detailsAlbumName"},t.albumName)),c.a.createElement("div",{className:"albumssection__detailsButtonsWrapper"},c.a.createElement("a",{className:"albumssection__detailsFullAlbumSpotify",href:t.spotifyAlbumURL,target:"_blank",rel:"noopener noreferrer"},"Pe\u0142ny album znajdziesz tutaj"),c.a.createElement("button",{className:"albumssection__detailsDeleteAlbum",onClick:function(){n(s()),n(r(t.albumID))}},"Usu\u0144 album z ulubionych"))),c.a.createElement("div",{className:"albumssection__tracksWrapper"},a),c.a.createElement("button",{className:"albumssection__detailsClose",onClick:function(){return n(s())}},c.a.createElement("i",{className:"fas fa-times"})))}),T=(a(43),function(e){var t=e.album,a=e.dispatch,n=e.showAlbumDetails,s=e.setAlbumDetails;return c.a.createElement("div",{className:"albumssection__wrapper"},c.a.createElement("img",{src:t.albumIMG,alt:"Album",className:"albumssection__image"}),c.a.createElement("div",{className:"albumssection__hoverDiv",onClick:function(){a(n()),a(s({albumIMG:t.albumIMG,albumID:t.albumID,albumName:t.albumName,artistName:t.artistName,tracks:t.tracks,spotifyAlbumURL:t.spotifyAlbumURL}))}},c.a.createElement("p",{className:"albumssection__nameHover"},t.artistName),c.a.createElement("p",{className:"albumssection__nameHover"},t.albumName)))}),R=(a(44),function(e){var t=e.track,a=e.answer,n=e.classesBtn,s=e.classes,r=e.dispatch,l=e.stopMusic,i=e.setAndPlayCurrentTrack;return c.a.createElement("div",{className:"albumssection__trackWrapper"},t.preview_url?a?c.a.createElement("button",{className:n,onClick:function(){r(l())}},"Stop"):c.a.createElement("button",{className:"albumssection__detailsTrackButton",onClick:function(){r(i(t.preview_url))}},"Play"):c.a.createElement("button",{className:"albumssection__detailsTrackButton",disabled:!0},"Play"),c.a.createElement("p",{className:s},t.track_number,". ",t.name))}),I=function(e){return{type:"SET_AND_PLAY_CURRENT_TRACK",trackURL:e}},j=function(){return{type:"STOP_PLAYING_TRACK"}},L=function(){return{type:"SHOW_ALBUM_DETAILS",isAlbumDetailsVisible:!0}},w=function(){return{type:"HIDE_ALBUM_DETAILS",isAlbumDetailsVisible:!1}},C=function(e){return{type:"SET_ALBUM_DETAILS",albumDetails:e}},U=function(){var e=Object(h.c)((function(e){return e.favouriteAlbums.favouriteAlbums})),t=Object(h.c)((function(e){return e.player.trackURL})),a=Object(h.c)((function(e){return e.player.isPlaying})),n=Object(h.c)((function(e){return e.albumDetails.albumDetails})),s=Object(h.c)((function(e){return e.albumDetails.isAlbumDetailsVisible})),r=Object(h.b)(),l=e.map((function(e){return c.a.createElement(T,{key:e.albumID,album:e,dispatch:r,showAlbumDetails:L,setAlbumDetails:C})})),i=n.tracks.map((function(e){var n=!(!a||t!==e.preview_url),s=n?"albumssection__detailsTrackName albumssection__detailsTrackName--green":"albumssection__detailsTrackName",l=n?"albumssection__detailsTrackButton albumssection__detailsTrackButton--green":"albumssection__detailsTrackButton";return c.a.createElement(R,{key:e.id,track:e,answer:n,classesBtn:l,classes:s,dispatch:r,stopMusic:j,setAndPlayCurrentTrack:I})}));return c.a.createElement("section",{className:"albumssection"},l.length?l.reverse():c.a.createElement("div",{className:"albumssection__noResults"},c.a.createElement("p",null,"Brak danych")),s?c.a.createElement(O,{albumDetails:n,tracksListCurrentAlbum:i,dispatch:r,hideAlbumDetails:w,deleteAlbumFromList:E}):null)},M=function(){return c.a.createElement("main",{className:"main"},c.a.createElement(D,null),c.a.createElement(U,null))},H=(a(45),function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("p",{className:"footer__author"},"Projekt i realizacja Marcin Hercog"))}),B=function(){return c.a.createElement("div",{className:"websitepage"},c.a.createElement(b,null),c.a.createElement(M,null),c.a.createElement(H,null))},P=function(){var e=function(){var e=u(),t=new Headers;t.append("Authorization","Basic ".concat(btoa("4d305e8a665a43b59a5e7f5f71e265df:fc67cf47ac024e2cb3a703b27e2bdd71")));var a=new URLSearchParams;return a.append("grant_type","authorization_code"),a.append("code",e),a.append("redirect_uri",String("https://mkphercog.github.io/musicfromspotify/")),{headers:t,urlencoded:a,fetchOptions:{method:"POST",headers:t,body:a,redirect:"follow"},codeToGetAccess:e}}(),t=e.codeToGetAccess,a=e.fetchOptions,s=Object(h.c)((function(e){return e.authorization.access_token})),r=Object(h.c)((function(e){return e.fetchData.featching})),l=Object(h.b)();return Object(n.useEffect)((function(){t&&!s&&(l({type:"DATA_FETCHING"}),fetch("https://accounts.spotify.com/api/token",a).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){l({type:"DATA_FETCHED"}),l(y(e.access_token,e.refresh_token)),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token)})).catch((function(e){l(A(e.message)),console.log(e)}))),t||(localStorage.setItem("access_token",""),localStorage.setItem("refresh_token","")),window.innerWidth>=1024&&l({type:"SHOW_SEARCH_RESULTS",isSearchResultsVisible:!0})}),[]),c.a.createElement("div",{className:"App"},r?c.a.createElement(g,null):null,s?c.a.createElement(B,null):c.a.createElement(f,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(3),G=a(14),W=a(15),V=a(2),F={access_token:u()?String(localStorage.getItem("access_token")):"",refresh_token:localStorage.getItem("refresh_token")?String(localStorage.getItem("refresh_token")):""},K={listOfAlbums:[],isSearchResultsVisible:!1},x=a(10),J=localStorage.getItem("favouriteAlbums")?localStorage.getItem("favouriteAlbums"):"",Y={favouriteAlbums:J?JSON.parse(J):[]},Z=new Audio,q={trackURL:"",isPlaying:!1},$={isAlbumDetailsVisible:!1,albumDetails:{albumIMG:"",albumID:"",albumName:"",artistName:"",tracks:[],spotifyAlbumURL:""}},Q={featching:!1,featched:!1,error:!1,errorMessage:""},X=Object(z.combineReducers)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCESS_TOKENS":return Object(V.a)({},e,{access_token:t.access_token,refresh_token:t.refresh_token});default:return e}},searching:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_SEARCH_RESULTS":case"HIDE_SEARCH_RESULTS":return Object(V.a)({},e,{isSearchResultsVisible:t.isSearchResultsVisible});case"SEARCH_ALBUMS":return Object(V.a)({},e,{listOfAlbums:t.listOfAlbums});default:return e}},favouriteAlbums:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALBUM_TO_LIST":var a={albumIMG:t.albumIMG,albumID:t.albumID,albumName:t.albumName,artistName:t.artistName,tracks:t.tracks,spotifyAlbumURL:t.spotifyAlbumURL};return localStorage.setItem("favouriteAlbums",JSON.stringify([].concat(Object(x.a)(e.favouriteAlbums),[a]))),Object(V.a)({},e,{favouriteAlbums:[].concat(Object(x.a)(e.favouriteAlbums),[a])});case"DELETE_ALBUM_FROM_LIST":var n=e.favouriteAlbums.filter((function(e){return e.albumID!==t.albumID}));return localStorage.setItem("favouriteAlbums",JSON.stringify(n)),Object(V.a)({},e,{favouriteAlbums:n});default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AND_PLAY_CURRENT_TRACK":return Z.src=t.trackURL,Z.play(),Object(V.a)({},e,{trackURL:t.trackURL,isPlaying:!0});case"STOP_PLAYING_TRACK":return Z.pause(),Object(V.a)({},e,{trackURL:"",isPlaying:!1});default:return e}},albumDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALBUM_DETAILS":case"HIDE_ALBUM_DETAILS":return Object(V.a)({},e,{isAlbumDetailsVisible:t.isAlbumDetailsVisible});case"SET_ALBUM_DETAILS":return Object(V.a)({},e,{albumDetails:t.albumDetails});default:return e}},fetchData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_FETCHING":return Object(V.a)({},e,{featching:!0,featched:!1,error:!1,errorMessage:""});case"DATA_FETCHED":return Object(V.a)({},e,{featching:!1,featched:!0,error:!1,errorMessage:""});case"DATA_ERROR":return Object(V.a)({},e,{featching:!1,featched:!1,error:!0,errorMessage:t.errorMessage});default:return e}}}),ee=Object(W.composeWithDevTools)(Object(z.applyMiddleware)(G.a)),te=Object(z.createStore)(X,ee);r.a.render(c.a.createElement(h.a,{store:te},c.a.createElement(c.a.StrictMode,null,c.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.ebddfc70.chunk.js.map